{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ title }}</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-grid.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-theme-alpine.css">

        <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script> 
        <!-- <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@35.1.0/dist/ag-grid-enterprise.min.js"></script> -->
    </head>


    <body>

        {% include "home/side_bar.html" %}  

        <div class="main-content p-4 sm:ml-64">
            <div id = "border_around_all_main_stuff" class = "p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700">
                <div id="controls" class="mb-3 d-flex gap-4 align-items-center">
                    <div class="form-check form-check-inline mb-0">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="table_type"
                            id="table_from_scratch_radio"
                            value="table_from_scratch_wrapper"
                            checked
                        >
                        <label class="form-check-label" for="table_from_scratch_radio">Table from scratch</label>
                    </div>

                    <div class="form-check form-check-inline mb-0">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="table_type"
                            id="ag_grid_table_radio"
                            value="AG_Grid_table_wrapper"
                        >
                        <label class="form-check-label" for="ag_grid_table_radio">AG Grid Table</label>
                    </div>
                </div>

                    
                <div id="table" class="ag-theme-alpine" style="height: 600px; width: 100%;"></div>


            </div>
        </div>



        
    </body>


    {{ cell_data|json_script:"row-data" }}
    {{ columns|json_script:"columns-data" }}

    <script>

            const myGridElement = document.querySelector('#table');

            const rowData = JSON.parse(document.getElementById('row-data').textContent);
            const columns = JSON.parse(document.getElementById('columns-data').textContent);
            const columnDefs = columns.map((column) => ({ field: column }));



            const defaultColDef = {
                flex: 1,
                filter: true,
                editable: true,
            };

            const gridOptions = {
                // Row Data: The data to be displayed.
                rowData,
                // Column Definitions: Defines the columns to be displayed.
                columnDefs,
                defaultColDef
            };

            agGrid.createGrid(myGridElement, gridOptions);

    </script>

</html>